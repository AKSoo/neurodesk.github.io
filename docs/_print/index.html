<!doctype html><html lang=en class=no-js>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=generator content="Hugo 0.88.1"><link rel=canonical type=text/html href=https://neurodesk.github.io/docs/>
<link rel=alternate type=application/rss+xml href=https://neurodesk.github.io/docs/index.xml>
<meta name=ROBOTS content="NOINDEX, NOFOLLOW">
<link rel="shortcut icon" href=/favicons/favicon.ico>
<link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180>
<link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16>
<link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32>
<link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36>
<link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48>
<link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72>
<link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96>
<link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144>
<link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192>
<title>Documentation | NeuroDesk</title>
<meta name=description content="A flexible, scalable and easy to use data analysis environment for reproducible neuroimaging.
">
<meta property="og:title" content="Documentation">
<meta property="og:description" content="A flexible, scalable and easy to use data analysis environment for reproducible neuroimaging.
">
<meta property="og:type" content="website">
<meta property="og:url" content="https://neurodesk.github.io/docs/"><meta property="og:site_name" content="NeuroDesk">
<meta itemprop=name content="Documentation">
<meta itemprop=description content="A flexible, scalable and easy to use data analysis environment for reproducible neuroimaging.
"><meta name=twitter:card content="summary">
<meta name=twitter:title content="Documentation">
<meta name=twitter:description content="A flexible, scalable and easy to use data analysis environment for reproducible neuroimaging.
">
<link rel=preload href=/scss/main.min.54a6b13de98a6b564f59b9d4cda427d6ae62ab54c015b5b9f5ed167c2da7fdd5.css as=style>
<link href=/scss/main.min.54a6b13de98a6b564f59b9d4cda427d6ae62ab54c015b5b9f5ed167c2da7fdd5.css rel=stylesheet integrity>
<script src=https://code.jquery.com/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-00000000-0','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body class=td-section>
<header>
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
<a class=navbar-brand href=/>
<span class=navbar-logo></span><span class="text-uppercase font-weight-bold">NeuroDesk</span>
</a>
<div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar>
<ul class="navbar-nav mt-2 mt-lg-0">
<li class="nav-item mr-4 mb-2 mb-lg-0">
<a class="nav-link active" href=/docs/><span class=active>Documentation</span></a>
</li>
</ul>
</div>
<div class="navbar-nav d-none d-lg-block">
<input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off>
</div>
</nav>
</header>
<div class="container-fluid td-outer">
<div class=td-main>
<div class="row flex-xl-nowrap">
<div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none">
</div>
<div class="d-none d-xl-block col-xl-2 td-toc d-print-none">
</div>
<main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main>
<div class=td-content>
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This the multi-page printable view of this section.
<a href=# onclick="return print(),!1">Click here to print</a>.
</p><p>
<a href=/docs/>Return to the regular view of this page</a>.
</p>
</div>
<h1 class=title>Documentation</h1>
<div class=lead>A flexible, scalable and easy to use data analysis environment for reproducible neuroimaging.</div>
<ul>
<li>1: <a href=#pg-6e17e09fffc1050f46600282def85180>Neurodesk Overview</a></li>
<ul>
</ul>
<li>2: <a href=#pg-ba03213c85edba92d978f939557f31e6>Neurodesktop</a></li>
<ul>
<li>2.1: <a href=#pg-0916fe04e84f6b30644efe9a9fa87a91>Getting Started</a></li>
<ul>
<li>2.1.1: <a href=#pg-c9662bb32400ec6828eed53f31cf6555>Linux</a></li>
<li>2.1.2: <a href=#pg-b38c91c080a0eb8d1b287cce61a2913d>MacOS</a></li>
<li>2.1.3: <a href=#pg-87642ad7e9eab5f4f32e180883213db4>Windows</a></li>
<li>2.1.4: <a href=#pg-f18fe8cf2e51f4592753190891413c14>HPC</a></li>
<li>2.1.5: <a href=#pg-2cb39ae1fe927afd991445cce7b9f813>Cloud</a></li>
<li>2.1.6: <a href=#pg-784674433df25a8a2fea1ab0994fd949>Demo</a></li>
</ul>
<li>2.2: <a href=#pg-a1abf9b90f3887a0021426829e383df4>What's next?</a></li>
<li>2.3: <a href=#pg-3aab88ee1e48cad88e2180be3e99a33b>What's in the box?</a></li>
<li>2.4: <a href=#pg-71c9f282478b9d11471d083fb454cfd4>Troubleshooting</a></li>
<li>2.5: <a href=#pg-6fcc3ae2c99b700109cf4d44a0a17071>Release History</a></li>
</ul>
<li>3: <a href=#pg-216e6b441d02e354a557e95ac5aff8f4>Neurocommand</a></li>
<ul>
<li>3.1: <a href=#pg-7dcdaf2682aade0e69b4813cd0359095>Getting Started</a></li>
<ul>
<li>3.1.1: <a href=#pg-b25aa0b6f8dfd4ff32d8bffbdca60e3b>Linux</a></li>
<li>3.1.2: <a href=#pg-180aa3bd9988d06cd8c909d2dd3a6340>Windows</a></li>
</ul>
<li>3.2: <a href=#pg-13b67b32e7c5f0ca31dc1aad2d3c567c>Troubleshooting</a></li>
</ul>
<li>4: <a href=#pg-88405e8e9824a3a23cd8fda56d2e5574>Neurocontainers</a></li>
<ul>
</ul>
<li>5: <a href=#pg-6c4dd4bbdf2d2146d79c0c0f18f4c96a>Advanced</a></li>
<ul>
<li>5.1: <a href=#pg-c0a88d2c479512f10e638c4638d51092>Add tool</a></li>
<li>5.2: <a href=#pg-b9cd3c04d25cdb41d3043cfa7acab883>Storage</a></li>
<li>5.3: <a href=#pg-9a7c227f489e066f7d748ce204b03813>System Testing</a></li>
</ul>
<li>6: <a href=#pg-f614fb095a0a23c57b6f9d4a9abcbb11>For Developers</a></li>
<ul>
<li>6.1: <a href=#pg-08a90f4738abd9b7c845a70e79c1eba4>Neurodesk Architecture</a></li>
</ul>
</ul>
<div class=content>
<h2 id=overview>Overview</h2>
<p>For an overview of the Neurodesk platform, go to: <a href=/docs/overview/>Overview</a></p>
<h2 id=quick-start>Quick Start</h2>
<p>To install the Neurodesktop container, go to: <a href=/docs/neurodesktop/getting-started/>Getting Started</a></p>
<h2 id=feedback--inquiries>Feedback & Inquiries</h2>
<p>To ask questions or suggest new features, <a href=https://github.com/NeuroDesk/neurodesk.github.io/discussions>join the discussion</a> on github. For issues with the <em>Neurodesk</em> platform, please open a <a href=https://github.com/NeuroDesk/neurodesk.github.io/issues>new issue</a>.</p>
<h2 id=acknowledgments>Acknowledgments</h2>
<p><img src=/nif.png alt=nif title=nif></p>
<p><img src=/uq_logo.png alt=uq title=uq></p>
<p><img src=/swinburne_uni_logo.png alt=swinburne title=swinburne></p>
<p><img src=/liege_uni_logo.png alt=liege title=liege></p>
<h2 id=funding>Funding</h2>
<p>Thank you to Oracle for Research for providing Oracle Cloud credits and related resources to support this project.</p>
<img src=https://user-images.githubusercontent.com/4021595/119061922-db877080-ba18-11eb-9882-d53a25ec88ee.png width=250>
<p>This project is supported by an Australian Research Data Commons (ARDC) Platform project “Australian
Electrophysiology Data Analytics PlaTform (AEDAPT)”.</p>
<img src=https://user-images.githubusercontent.com/4021595/119062104-3caf4400-ba19-11eb-8211-e2e9ce831a16.png width=250>
</div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6e17e09fffc1050f46600282def85180>1 - Neurodesk Overview</h1>
<div class=lead>A flexible, scalable and easy to use data analysis environment for reproducible neuroimaging.</div>
<p>Neurodesk provides a containerised data analysis environment to facilitate reproducible analysis of neuroimaging data. At Neurodesk, we believe that reproducibility should be a fundamental principle underlying neuroscientific data analysis (1). Analysis pipelines for neuroimaging data typically rely on specific versions of packages and software, and are dependent on their native operating system. These dependencies mean that a working analysis pipeline may fail or produce different results on a new computer, or even on the same computer after a software update. Neurodesk provides a platform in which anyone, anywhere, using any computer can reproduce your original research findings given the original data and analysis code.</p>
<h2 id=what-is-a-container>What is a container?</h2>
<p>The Neurodesk environment allows users to build and use containers for analysing neuroimaging data. Containers can be compared to virtual machines, in that they allow users to create a virtual, isolated computing environment with an operating system separate to that of the host machine. However, containers differ from virtual machines in that they virtualise software rather than hardware. Practically, this means that container images require few system resources to install, start-up quickly, and are easily portable between computers. To read more about Docker containers, visit <a href=https://www.docker.com/resources/what-container>the Docker webpage</a></p>
<h2 id=the-neurodesk-ecosystem>The Neurodesk ecosystem</h2>
<p>The Neurodesk ecosystem includes a number of tools for containerised analysis of neuroimaging data. These include:</p>
<p><img src=/NeurodeskArchitecture.png alt=architecture title=architecture></p>
<h3 id=neurodesktop>Neurodesktop</h3>
<blockquote>
<p>If you’re new to Neurodesk, we recommend you begin with Neurodesktop.</p>
</blockquote>
<p><em>Neurodesktop</em> is a compact Docker container with a browser-accessible virtual desktop that allows you develop and implement data analysis pipelines as though you’re on your own computer. The <em>neurodesktop</em> container has the basic tools required for the analysis of fMRI and EEG data pre-installed.
To get started, see: <a href=/docs/neurodesktop/>Neurodesktop</a></p>
<h3 id=neurocommand>Neurocommand</h3>
<p><em>Neurocommand</em> offers the option to install and manage multiple distinct containers for more advanced users who prefer a command-line interface. <em>Neurocommand</em> is the recommended interface for users seeking to use Neurodesk in high performance computing (HPC) environments.</p>
<p>To get started, see: <a href=/docs/neurocommand/>Neurocommand</a></p>
<h3 id=transparent-singularity>Transparent-singularity</h3>
<p>The applications pre-installed in <em>neurodesktop</em> and <em>neurocommand</em> are accessible through <em>transparent-singularity</em>, which allows users to transparently use containerised software as through it were installed natively.</p>
<p>To find out more about this open-source project, see: <a href=https://github.com/NeuroDesk/transparent-singularity>transparent-singularity</a></p>
<h3 id=neurocontainers>Neurocontainers</h3>
<p>The <em>neurocontainers</em> repository contains build scripts for sub-containers which are wrapped around executables for neuroimaging data-analysis software. These neurocontainers can be used in combination with neurocommand or transparent-singularity.</p>
<p>To get started, see: <a href=/docs/neurocontainers/>Neurocontainers</a></p>
<h3 id=neurodocker>Neurodocker</h3>
<p><em>Neurodocker</em> is a command-line program that generates custom Dockerfiles and Singularity recipes for neuroimaging and minifies existing containers.</p>
<p>To find out more about this open-source project, see: <a href=https://github.com/NeuroDesk/neurodocker>Neurodocker</a></p>
<h2 id=references>References</h2>
<ol>
<li>
<ol>
<li>National Academies of Sciences, Engineering, and Medicine. 2019. Reproducibility and Replicability in Science. Washington, DC: The National Academies Press. <a href=https://doi.org/10.17226/25303>https://doi.org/10.17226/25303</a>.</li>
</ol>
</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-ba03213c85edba92d978f939557f31e6>2 - Neurodesktop</h1>
<div class=lead>The plug-and-play, browser-accessible, containerised data analysis environment.</div>
</div>
<div class=td-content>
<h1 id=pg-0916fe04e84f6b30644efe9a9fa87a91>2.1 - Getting Started</h1>
<div class=lead>Select your operating system to get started with neurodesktop.</div>
</div>
<div class=td-content>
<h1 id=pg-c9662bb32400ec6828eed53f31cf6555>2.1.1 - Linux</h1>
<div class=lead>Install neurodesktop on Linux</div>
<h2 id=minimum-system-requirements>Minimum System Requirements</h2>
<ol>
<li>At least 3GB free space for neurodesktop base image</li>
<li>Docker requirements. Details found under <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></li>
</ol>
<h2 id=quickstart>Quickstart</h2>
<ol>
<li>
<p>Install Docker from here: <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></p>
</li>
<li>
<p>Create a local folder where the downloaded applications will be stored, e.g. ~/neurodesktop</p>
</li>
<li>
<p>Open a terminal, and type the folowing command to automatically download the neurodesktop container and run it (Mac, Windows, Linux commands listed below)</p>
</li>
</ol>
<pre tabindex=0><code>sudo docker run --shm-size=1gb -it --privileged --name neuromachine -v ~/neurodesktop:/neurodesktop -e USER=user -p 8080:8080 vnmd/neuromachine:latest
</code></pre><p>(notice: if you get errors in neurodesktop then check if the ~/neurodesktop directory is writable to all users, otherwise run <code>chmod a+rwx ~/neurodesktop</code>)</p>
<ol start=4>
<li>Once neurodesktop is downloaded i.e. <code>guacd[77]: INFO: Listening on host 127.0.0.1, port 4822</code> is displayed in terminal, open a browser and go to:</li>
</ol>
<pre tabindex=0><code>http://localhost:8080/#/?username=user&amp;password=password
</code></pre><p>or open a VNC Client and connect to port 5901 (for this -p 5901:5901 has to be added to the docker call)</p>
<ol start=5>
<li>neurodesktop is ready to use!</li>
</ol>
<ul>
<li>User is <code>user</code></li>
<li>Password is <code>password</code></li>
</ul>
<h2 id=stopping-neurodesktop>Stopping neurodesktop:</h2>
<p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p>
<ol>
<li>
<p>Click on the terminal from which you ran neurodesktop</p>
</li>
<li>
<p>Press control-C</p>
</li>
<li>
<p>Type:</p>
</li>
</ol>
<pre tabindex=0><code>docker stop neuromachine
</code></pre><ol start=4>
<li>Type:</li>
</ol>
<pre tabindex=0><code>docker rm neuromachine
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b38c91c080a0eb8d1b287cce61a2913d>2.1.2 - MacOS</h1>
<div class=lead>Install neurodesktop on MacOS</div>
<h2 id=minimum-system-requirements>Minimum System Requirements</h2>
<ol>
<li>At least 3GB free space for neuromachine base image</li>
<li>Docker requirements. Details found under <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></li>
</ol>
<h2 id=quickstart>Quickstart</h2>
<ol>
<li>
<p>Install Docker from here: <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></p>
</li>
<li>
<p>Create a local folder where the downloaded applications will be stored, e.g. ~/neurodesktop</p>
</li>
<li>
<p>Open a terminal, and type the folowing command to automatically download the neurodesktop container and run it</p>
</li>
</ol>
<ul>
<li>Mac:</li>
</ul>
<pre tabindex=0><code>docker run --shm-size=1gb -it --privileged --name neuromachine -v ~/neurodesktop:/neurodesktop -e USER=user -p 8080:8080 vnmd/neuromachine:latest
</code></pre><p>(notice: There is a bug in docker 3.3.0 for Mac that makes this command not run correctly and there will be no application menu when you start the desktop. Update your docker version when you see this!)</p>
<p>(notice: if you get errors in neurodesktop then check if the ~/neurodesktop directory is writable to all users, otherwise run <code>chmod a+rwx ~/neurodesktop</code>)</p>
<ol start=4>
<li>Once neurodesktop is downloaded i.e. <code>guacd[77]: INFO: Listening on host 127.0.0.1, port 4822</code> is displayed in terminal, open a browser and go to:</li>
</ol>
<pre tabindex=0><code>http://localhost:8080/#/?username=user&amp;password=password
</code></pre><p>or open a VNC Client and connect to port 5901 (for this -p 5901:5901 has to be added to the docker call)</p>
<ol start=5>
<li>neurodesktop is ready to use!</li>
</ol>
<ul>
<li>User is <code>user</code></li>
<li>Password is <code>password</code></li>
</ul>
<h2 id=stopping-neurodesktop>Stopping neurodesktop:</h2>
<p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p>
<ol>
<li>
<p>Click on the terminal from which you ran neurodesktop</p>
</li>
<li>
<p>Press control-C</p>
</li>
<li>
<p>Type:</p>
</li>
</ol>
<pre tabindex=0><code>docker stop neuromachine
</code></pre><ol start=4>
<li>Type:</li>
</ol>
<pre tabindex=0><code>docker rm neuromachine
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-87642ad7e9eab5f4f32e180883213db4>2.1.3 - Windows</h1>
<div class=lead>Install neurodesktop on Windows</div>
<h2 id=minimum-system-requirements>Minimum System Requirements</h2>
<ol>
<li>At least 3GB free space for neuromachine base image</li>
<li>Docker requirements. Details found under <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></li>
<li>If installing docker using WSL, atleast 20GB space recommended for WSL with Ubuntu</li>
</ol>
<h2 id=quickstart>Quickstart</h2>
<ol>
<li>
<p>Install Docker from here: <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></p>
</li>
<li>
<p>Create a local folder where the downloaded applications will be stored, e.g. C:\neurodesktop</p>
</li>
<li>
<p>Open a terminal, and type the folowing command to automatically download the neurodesktop container and run it</p>
</li>
</ol>
<pre tabindex=0><code>docker run --shm-size=1gb -it --privileged --name neuromachine -v C:/neurodesktop:/neurodesktop -e USER=user -p 8080:8080 vnmd/neuromachine:20210708
</code></pre><ol start=4>
<li>Once neuromachine is downloaded i.e. <code>guacd[77]: INFO: Listening on host 127.0.0.1, port 4822</code> is displayed in terminal, open a browser and go to:</li>
</ol>
<pre tabindex=0><code>http://localhost:8080/#/?username=user&amp;password=password
</code></pre><p>or open a VNC Client and connect to port 5901 (for this -p 5901:5901 has to be added to the docker call)</p>
<ol start=5>
<li>neurodesktop is ready to use!</li>
</ol>
<ul>
<li>User is <code>user</code></li>
<li>Password is <code>password</code></li>
</ul>
<h2 id=stopping-neurodesktop>Stopping neurodesktop:</h2>
<p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p>
<ol>
<li>
<p>Click on the terminal from which you ran neurodesktop</p>
</li>
<li>
<p>Press control-C</p>
</li>
<li>
<p>Type:</p>
</li>
</ol>
<pre tabindex=0><code>docker stop neuromachine
</code></pre><ol start=4>
<li>Type:</li>
</ol>
<pre tabindex=0><code>docker rm neuromachine
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-f18fe8cf2e51f4592753190891413c14>2.1.4 - HPC</h1>
<div class=lead>Run neurodesktop in a high performance computing environment</div>
<p>One way of running this project on HPCs is via <a href=https://neurodesk.github.io/docs/overview/neurocommand/>https://neurodesk.github.io/docs/overview/neurocommand/</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-2cb39ae1fe927afd991445cce7b9f813>2.1.5 - Cloud</h1>
<div class=lead>Run neurodesktop using Oracle or Azure cloud computing</div>
<table>
<thead>
<tr>
<th>Cloud provider</th>
<th>link</th>
</tr>
</thead>
<tbody>
<tr>
<td>Oracle</td>
<td><a href=https://mri.sbollmann.net/index.php/2020/12/08/run-neurodesk-on-oracle-cloud-free-tier/>https://mri.sbollmann.net/index.php/2020/12/08/run-neurodesk-on-oracle-cloud-free-tier/</a></td>
</tr>
<tr>
<td>Azure</td>
<td><a href=https://henryjburg.medium.com/neurodesk-running-on-azure-3e38c590a152>https://henryjburg.medium.com/neurodesk-running-on-azure-3e38c590a152</a></td>
</tr>
</tbody>
</table>
<h2 id=minimum-system-requirements>Minimum System Requirements</h2>
<ol>
<li>At least 3GB free space for neuromachine base image</li>
<li>Docker requirements. Details found under <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></li>
</ol>
<h2 id=quickstart>Quickstart</h2>
<ol>
<li>
<p>Install Docker from here: <a href=https://docs.docker.com/get-docker/>https://docs.docker.com/get-docker/</a></p>
</li>
<li>
<p>Create a local folder where the downloaded applications will be stored, e.g. ~/neurodesktop</p>
</li>
<li>
<p>Open a terminal, and type the folowing command to automatically download the neurodesktop container and run it (Mac, Windows, Linux commands listed below)</p>
</li>
</ol>
<pre tabindex=0><code>sudo docker run --shm-size=1gb -it --privileged --name neuromachine -v ~/neurodesktop:/neurodesktop -e USER=user -p 8080:8080 vnmd/neuromachine:latest
</code></pre><p>(notice: if you get errors in neurodesktop then check if the ~/neurodesktop directory is writable to all users, otherwise run <code>chmod a+rwx ~/neurodesktop</code>)</p>
<ol start=4>
<li>Once neurodesktop is downloaded i.e. <code>guacd[77]: INFO: Listening on host 127.0.0.1, port 4822</code> is displayed in terminal, open a browser and go to:</li>
</ol>
<pre tabindex=0><code>http://localhost:8080/#/?username=user&amp;password=password
</code></pre><p>or open a VNC Client and connect to port 5901 (for this -p 5901:5901 has to be added to the docker call)</p>
<ol start=5>
<li>neurodesktop is ready to use!</li>
</ol>
<ul>
<li>User is <code>user</code></li>
<li>Password is <code>password</code></li>
</ul>
<h2 id=stopping-neurodesktop>Stopping neurodesktop:</h2>
<p>When done processing your data it is important to stop and remove the container - otherwise the next start or container update will give an error ("&mldr; The container name &ldquo;/neurodesktop&rdquo; is already in use&mldr;")</p>
<ol>
<li>
<p>Click on the terminal from which you ran neurodesktop</p>
</li>
<li>
<p>Press control-C</p>
</li>
<li>
<p>Type:</p>
</li>
</ol>
<pre tabindex=0><code>docker stop neuromachine
</code></pre><ol start=4>
<li>Type:</li>
</ol>
<pre tabindex=0><code>docker rm neuromachine
</code></pre>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-784674433df25a8a2fea1ab0994fd949>2.1.6 - Demo</h1>
<div class=lead>Run a demo of neurodesktop <em>without</em> installing Docker</div>
<div class="pageinfo pageinfo-primary">
<p>This page needs to link to MyBinder demo</p>
</div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-a1abf9b90f3887a0021426829e383df4>2.2 - What's next?</h1>
<div class=lead>Congratulations! You&rsquo;ve installed Neurodesktop. What happens next?</div>
<p>Now that you’ve installed and launched neurodesktop, you should see a virtual desktop environment in your browser, which might look something like this:</p>
<p><img src=/Desktop.png alt=desktop title=desktop></p>
<p>In this linux desktop environment, you can access the menu, launch programs, write analysis code, use version control software (i.e. git) and develop analysis pipelines as though you were on your own computer.</p>
<h2 id=release>Release</h2>
<p>Keep a note of the release date of the container image that you installed. Regardless of what operating system you installed neurodesktop into, the release date would have been at the end of the <em>docker run</em> command:</p>
<p><img src=/version.png alt=version title=version></p>
<p>We regularly update neurodesktop to make sure it’s running well and has up-to-date software. You can check the <a href=https://neurodesk.github.io/docs/neurodesktop/release-history/>Release History</a> page for details of previous releases. If you’d like to update your container at any time, simply switch out the release number for the version you would like. If you’ve finished working on an analysis pipeline and would like to share it with others, you can point them toward the stable release number that you worked in. That way anyone, on any computer around the world can replicate your analysis pipeline in the exact same computing environment that you developed it in.</p>
<h2 id=video-tutorial>Video tutorial</h2>
<p>Click <a href="https://www.youtube.com/watch?v=JLv_5fycugw">here</a> to watch a 2 minute tutorial video from OHBM 2021</p>
<h2 id=how-to-access-files-from-your-host-computer>How to access files from your Host computer</h2>
<p>The <code>-v C:/neurodesktop:/neurodesktop</code> part of the docker command links the directory &ldquo;neurodesktop&rdquo; on the &ldquo;C drive&rdquo; of your Windows computer to the directory <code>/neurodesktop</code> inside the Desktop environment. Everything you store in there will be available inside neurodesktop and on the host computer. You can also mount additional directories by adding another -v parameter set (e.g. <code>-v D:/moredata:/data</code>) - this will mount the directory moredata from your D drive to <code>/data</code> inside neurodesktop.</p>
<h2 id=how-to-launchdownload-applications>How to launch/download applications</h2>
<p>Click on the Launcher icon in bottom-left corner and navigate to the &ldquo;Neurodesktop&rdquo; menu, then select the application and version you wish to launch. If it is the first time you launch the application, it will be downloaded to your desktop environment. The application is ready to use when the &ldquo;Singularity>&rdquo; prompt appears in the terminal window that opens. If you chose in the menu the GUI of the application (e.g., fsleyesGUI 6.0.3), it will open automatically. If you chose that application itself (e.g., fsl 6.0.3), a terminal window will open, and you can use it to run any of the utilities packaged with the application, including the graphical utilities (e.g., typing &ldquo;fsl&rdquo; to run FSL&rsquo;s main menu).</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-3aab88ee1e48cad88e2180be3e99a33b>2.3 - What's in the box?</h1>
<div class=lead>The software available in neurodesktop</div>
<p>Neurodesktop comes with the essential software required for neuroimaging data analysis pre-installed. Each release is built with the most recent version of these packages available at the build date. Some example packages include:</p>
<ul>
<li>Visual Studio Code</li>
<li>Emacs</li>
<li>Gedit</li>
<li>Vim</li>
<li>Python</li>
<li>Lua</li>
<li>Git</li>
<li>Lmod</li>
<li>Nipype</li>
<li>Rsync</li>
<li>Singularity</li>
<li>GraphVis</li>
<li>Imagemagic</li>
<li>Htop</li>
<li>Firefox</li>
<li>Nextcloud client</li>
<li>OpenSSH client</li>
</ul>
<p>The neurodesktop environment is built to be light and fast to download and start-up. A number of additional programs are therefore available to use in the container, and will be downloaded when they are first used. A list of these additional packages can be found <a href=https://github.com/NeuroDesk/neurodesk/blob/master/cvmfs/log.txt>here</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-71c9f282478b9d11471d083fb454cfd4>2.4 - Troubleshooting</h1>
<div class=lead>Are you experiencing issues with neurodesktop?</div>
<p>Neurodesk is an open-source project that is always evolving. If you are experiencing an issue not listed here, please open a <a href=https://github.com/NeuroDesk/neurodesk/issues>new issue</a>, so that we can aim to solve it and update our help documentation.</p>
<p>To ask questions or suggest new features, <a href=https://github.com/NeuroDesk/neurodesk.github.io/discussions>join the discussion</a> on github.</p>
<h2 id=windows-users-wsl-not-installed-properly>Windows users: WSL not installed properly</h2>
<p>The Docker engine relies on the Windows subsystem for Linux (<a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10>WSL</a>) to run on a windows machine.</p>
<div class="alert alert-primary" role=alert>
<h4 class=alert-heading>Note</h4>
We recommend the <em>manual</em> install instructions, as the simplified install requires an upgrade to a preview build of Windows that may be unstable.
</div>
<p>If WSL is properly installed, the <em>Resources</em> tab of the Docker settings should look something like this:</p>
<p><img src=/Docker_WSL_correct.png alt=Docker_WSL_correct title=Docker_WSL_correct></p>
<p>However, if WSL is missing or incorrectly configured, the <em>Resources</em> tab of the Docker settings may look something like this:</p>
<p><img src=/Docker_WSL_incorrect.png alt=Docker_WSL_incorrect title=Docker_WSL_incorrect></p>
<p>If this is the case, follow the manual install instructions to install <a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10>WSL 2</a> (including installation of Ubuntu through Microsoft Store).</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6fcc3ae2c99b700109cf4d44a0a17071>2.5 - Release History</h1>
<div class=lead>Previous releases of neurodesktop</div>
<div class="pageinfo pageinfo-primary">
<p>Coming Soon</p>
</div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-216e6b441d02e354a557e95ac5aff8f4>3 - Neurocommand</h1>
<div class=lead>For more advanced users who prefer a command-line interface</div>
<p>Neurocommand requires a Linux host machine, virtual machine or WSL for Windows.</p>
</div>
<div class=td-content>
<h1 id=pg-7dcdaf2682aade0e69b4813cd0359095>3.1 - Getting Started</h1>
<div class=lead>Select your operating system to get started with neurocommand.</div>
</div>
<div class=td-content>
<h1 id=pg-b25aa0b6f8dfd4ff32d8bffbdca60e3b>3.1.1 - Linux</h1>
<div class=lead>Install neurocommand on Linux</div>
<h2 id=requirements>Requirements:</h2>
<h3 id=required>Required</h3>
<ul>
<li>python <a href=https://docs.conda.io/en/latest/miniconda.html#linux-installers>https://docs.conda.io/en/latest/miniconda.html#linux-installers</a></li>
<li>singularity <a href=https://sylabs.io/guides/3.5/user-guide/quick_start.html>https://sylabs.io/guides/3.5/user-guide/quick_start.html</a></li>
</ul>
<h3 id=optional>Optional</h3>
<ul>
<li>lmod <a href=https://sylabs.io/guides/3.5/user-guide/quick_start.html>https://lmod.readthedocs.io/en/latest/</a></li>
</ul>
<h2 id=inital-install>Inital install</h2>
<h3 id=command-line-mode---for-non-desktop-experience-eg-running-on-an-hpc>command line mode - For non-desktop experience (e.g. running on an HPC)</h3>
<p>If running on cli only &mldr;</p>
<ul>
<li>Load singularity and for best performance it should be 3.x e.g. <code>module load singularity/3.5.0</code></li>
<li>Run <code>git clone https://github.com/NeuroDesk/neurodesk.git</code> to clone the repository - make sure to clone this to a directory with enough storage, write permissions and NOT a symbolic link (to be sure run cd `pwd -P`)!</li>
<li>Run <code>cd neurodesk</code> to change into the directory</li>
<li>Run <code>bash build.sh --cli</code> to install in cli mode</li>
<li>Run <code>bash containers.sh</code> for installing indiviual containers or <code>bash containers.sh --all</code> for installing all containers</li>
<li>Run <code>module use $PWD/local/containers/modules/</code> to add the containers to your module search path. Add this to your .bashrc if working.</li>
<li>Run <code>ml avail</code> to see the installed containers at the top of the list (neurodesk containers will take preference over system modules with the same name). If a container is not yet there run <code>ml --ignore_cache avail</code></li>
</ul>
<h3 id=for-lxde-desktops>For Lxde desktops</h3>
<p>If running on an lxde desktop&mldr;
Run <code>bash build.sh --lxde --edit</code></p>
<h3 id=for-mate-desktops>For Mate desktops</h3>
<p>Run <code>bash build.sh --init</code> (or <code>bash build.sh --lxde --edit</code>)<br>
lxde/mate: Mate<br>
installdir: Where all the neurocommand files will be stored (Default: ./local)<br>
appmenu: The linux menu xml file. (Usually /etc/xdg/menus/****-applications.menu)<br>
appdir: Location for the .desktop files for this linux desktop (Usually /usr/share/applications)<br>
deskdir: Location for the .directory files for this linux desktop (Typically /usr/share/desktop-directories)</p>
<h3 id=for-desktop-menus>For desktop menus:</h3>
<p><code>sudo bash install.sh</code> to install<br>
<em>Creates symlinks to menu files in installation dir</em></p>
<p><code>sudo bash uninstall.sh</code> to uninstall<br>
<em>Removes symlinks</em></p>
<h2 id=to-update>To update</h2>
<p>Run <code>git pull</code><br>
Run <code>bash build.sh</code><br>
<em>install.sh does not need to be run again</em></p>
<h3 id=to-download-all-containers>To download all containers</h3>
<p>Run <code>bash containers.sh --all</code></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-180aa3bd9988d06cd8c909d2dd3a6340>3.1.2 - Windows</h1>
<div class=lead>Install neurocommand on Windows</div>
<h2 id=wsl-w-ubuntu--lxde>WSL (w/ Ubuntu + LXDE)</h2>
<p>For more information on WSL: <a href=https://docs.microsoft.com/en-us/windows/wsl>https://docs.microsoft.com/en-us/windows/wsl</a></p>
<h3 id=setting-up>Setting up</h3>
<ol>
<li>Setup WSL2 using the following instructions <em>(Ubuntu 18.04 recommended)</em><br>
<a href=https://docs.microsoft.com/en-us/windows/wsl/install-win10>https://docs.microsoft.com/en-us/windows/wsl/install-win10</a>
<em>Proceed until a Ubuntu bash shell is available from the Windows Host</em><br>
<em>Run the remaining commands in the Bash shell</em></li>
<li><code>sudo apt-get install lxde</code> to install LXDE desktop in WSL</li>
<li>Reboot</li>
<li><code>sudo apt-get install xrdp</code> to install XRDP in WSL</li>
<li>Open <code>/etc/xrdp/xrdp.ini</code>
Change <code>port=3389</code> to <code>port=3390</code> and save</li>
<li>Run <code>echo startlxde > ~/.xsession</code></li>
</ol>
<h3 id=running>Running</h3>
<ol>
<li><code>sudo service xrdp start</code> to start xrdp server</li>
<li>Open Microsoft Remote Desktop Connection in Windows host</li>
<li>Connect to <code>localhost:3390</code></li>
<li>In the next login page, leave Session as <code>Xorg</code>. Enter your WSL username and password and click <code>OK</code></li>
<li>This should open an LXDE Linux Desktop environment. Follow Linux guide from here on</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-13b67b32e7c5f0ca31dc1aad2d3c567c>3.2 - Troubleshooting</h1>
<div class=lead>Are you experiencing issues with neurocommand?</div>
<p>Neurodesk is an open-source project that is always evolving. If you are experiencing an issue not listed here, please open a <a href=https://github.com/NeuroDesk/neurodesk/issues>new issue</a>, so that we can aim to solve it and update our help documentation.</p>
<p>To ask questions or suggest new features, <a href=https://github.com/NeuroDesk/neurodesk.github.io/discussions>join the discussion</a> on github.</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-88405e8e9824a3a23cd8fda56d2e5574>4 - Neurocontainers</h1>
<div class=lead>What neurocontainers are about</div>
<h2 id=automatic-container-building-and-testing>Automatic container building and testing</h2>
<p>The containers can be used in combination with our <a href=https://github.com/NeuroDesk/transparent-singularity/>transparent singularity</a> or <a href=https://github.com/NeuroDesk/neurocommand/>neurocommand</a> tool, that wrap the executables inside a container to make them easily available for pipelines:</p>
<p>The containers are hosted on <a href=https://hub.docker.com/orgs/vnmd/repositories>dockerhub</a> or on <a href=https://github.com/NeuroDesk/neurocontainers/packages>github</a></p>
<h2 id=pull-containers>Pull containers</h2>
<p>e.g. for a julia container
docker</p>
<pre tabindex=0><code>docker pull vnmd/julia_1.6.1
</code></pre><p>build singularity image from dockerhub</p>
<pre tabindex=0><code>singularity build julia_1.6.1.simg docker://vnmd/julia_1.6.1
</code></pre><p>Replace <code>julia_1.6.1</code> with your selected application</p>
<h2 id=adding-new-recipes>Adding new recipes</h2>
<p>Refer to <a href=https://github.com/NeuroDesk/neurodocker>neurodocker</a> for more information on neurodocker recipes</p>
<p>To add an application (e.g. <em>newapp</em>), follow these steps.</p>
<ol>
<li>Clone the repository</li>
<li>Copy the directory template and rename to <em>newapp</em> in <code>caid/recipes</code></li>
<li>Modify <code>build.sh</code> in <code>caid/recipes/newapp</code> to build your application and update README.md</li>
<li>Run update-builders.sh from caid. This will auto-create the CI workflow for the application (or duplicate the template file and rename all occurances of template to <em>newapp</em>)</li>
<li>git commit and push</li>
</ol>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-6c4dd4bbdf2d2146d79c0c0f18f4c96a>5 - Advanced</h1>
<div class=lead>Advanced usage</div>
</div>
<div class=td-content>
<h1 id=pg-c0a88d2c479512f10e638c4638d51092>5.1 - Add tool</h1>
<div class=lead>Add a tool to neurodesktop</div>
<p>The goal of <em>neurodesktop</em> is to provide users with a large choice of tools to use in their pipelines.
Use the guide below to add a tool to <em>neurodesktop</em>.</p>
<h2 id=guiding-principles>Guiding principles</h2>
<p>To decide if a tool should be packaged in a singularity container or be installed in the main neurodesktop container we are currently following these guiding principles:</p>
<ol>
<li>Neurodesktop is not a package manager. This means we are not distributing tools in containers that can easily be installed via a standard package manager</li>
<li>Neurodesktop allows users to have multiple versions of tools in parallel via <a href=https://lmod.readthedocs.io/en/latest/>lmod</a>, this means that if different versions of tool can&rsquo;t be installed in parallel we package the tool inside a container.</li>
<li>Neurodesktop aims to provide simple tooling to link tools from different containers. This means that if a tool is required to coordinate container-tools, it should be in the main image.</li>
</ol>
<p>Examples:</p>
<table>
<thead>
<tr>
<th></th>
<th>easy install</th>
<th>coordinates containers</th>
<th>small in size</th>
<th>latest version is ok</th>
<th>useful more most users</th>
<th>Conclusion</th>
</tr>
</thead>
<tbody>
<tr>
<td>git</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>base</td>
</tr>
<tr>
<td>lmod</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>base</td>
</tr>
<tr>
<td>nipype</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>base</td>
</tr>
<tr>
<td>vscode</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>base</td>
</tr>
<tr>
<td>itksnap</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>yes</td>
<td>yes</td>
<td>container -> could be in base?</td>
</tr>
<tr>
<td>matlab</td>
<td>yes</td>
<td>yes</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>container due to size?</td>
</tr>
<tr>
<td>convert3D</td>
<td>yes</td>
<td>no</td>
<td>yes</td>
<td>no</td>
<td>no</td>
<td>container</td>
</tr>
<tr>
<td>fsl</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>container</td>
</tr>
<tr>
<td>mrtrix</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>container</td>
</tr>
<tr>
<td>freesurfer</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>no</td>
<td>container</td>
</tr>
</tbody>
</table>
<h2 id=build-container>Build container</h2>
<p>To build a container:</p>
<ol>
<li>Add recipe to neurodocker if relevant (<a href=https://github.com/NeuroDesk/neurodocker>https://github.com/NeuroDesk/neurodocker</a>) and create a pull request to neurodocker</li>
<li>Build the container <a href=https://github.com/NeuroDesk/caid>here</a></li>
<li>Test the container, and if successful add the container to the Readme table <a href=https://github.com/NeuroDesk/neurodesk>here</a></li>
</ol>
<h2 id=menu-entry>Menu entry</h2>
<p>As we want to propose several versions of the tools, each piece of software should have its own submenu under <code>VNM Neuroimaging</code>.
To do so, you first have to add a submenu to <code>menus/vnm-applications.menu</code> by adding:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#8f5902;font-style:italic>&lt;!-- [[Tool Name]] submenu --&gt;</span>
<span style=color:#204a87;font-weight:700>&lt;Menu&gt;</span>
    <span style=color:#204a87;font-weight:700>&lt;Name&gt;</span>[[Tool Name]]<span style=color:#204a87;font-weight:700>&lt;/Name&gt;</span>
    <span style=color:#204a87;font-weight:700>&lt;Directory&gt;</span>vnm-[[tool-name]].directory<span style=color:#204a87;font-weight:700>&lt;/Directory&gt;</span>
    <span style=color:#204a87;font-weight:700>&lt;Include&gt;</span>
        <span style=color:#204a87;font-weight:700>&lt;And&gt;</span>
            <span style=color:#204a87;font-weight:700>&lt;Category&gt;</span>[[Tool-Name]]<span style=color:#204a87;font-weight:700>&lt;/Category&gt;</span>
        <span style=color:#204a87;font-weight:700>&lt;/And&gt;</span>
    <span style=color:#204a87;font-weight:700>&lt;/Include&gt;</span>
<span style=color:#204a87;font-weight:700>&lt;/Menu&gt;</span> <span style=color:#8f5902;font-style:italic>&lt;!-- End [[Tool Name]] --&gt;</span>
</code></pre></div><p>The following table shows the formatting rules to follow:</p>
<table>
<thead>
<tr>
<th>Placeholder</th>
<th>Rule</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[[Tool name]]</code></td>
<td>Capitalized, spaces</td>
<td><code>ITK snap</code></td>
</tr>
<tr>
<td><code>[[tool-name]]</code></td>
<td>Lower case, no spaces (use <code>-</code> instead)</td>
<td><code>itk-snap</code> or <code>itksnap</code></td>
</tr>
<tr>
<td><code>[[Tool-name]]</code></td>
<td>Capitalized, no spaces (use <code>-</code> instead)</td>
<td><code>ITK-snap</code></td>
</tr>
</tbody>
</table>
<p>Next, we have to create the submenu itself as we referenced it by <code>vnm-[[tool-name]].directory</code>. To do so, create the file <code>menus/submenus/vnm-[[tool-name]].directory</code> and add the following information inside:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#204a87;font-weight:700>[Desktop Entry]</span>
<span style=color:#c4a000>Name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>[[Tool Name]]</span>
<span style=color:#c4a000>Comment</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>[[Tool Name]]</span>
<span style=color:#c4a000>Icon</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>/home/neuro/.config/lxpanel/LXDE/icons/[[icon-name]].png</span>
<span style=color:#c4a000>Type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>Directory</span>
</code></pre></div><p>If a specific icon is available in the <code>menus/icons</code> directory, replace <code>[[icon-name]]</code> by its name. Otherwise, use <code>vnm</code>.</p>
<h2 id=create-the-application>Create the application</h2>
<p>Finally, we have to create the actual application by creating the file <code>menus/applications/vnm-[[tool-name]]-[[0.0.0]].desktop</code>. The name of this file must contain the version of the tool (once again to allow multiple versions to live inside the same directory). Add the following description to this file:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#204a87;font-weight:700>[Desktop Entry]</span>
<span style=color:#c4a000>Name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>[[Tool Name]] [[0.0.0]] [[(Install only)]]</span>
<span style=color:#c4a000>GenericName</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>[[Tool Name]] [[0.0.0]]</span>
<span style=color:#c4a000>Comment</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>The description of what clicking on this application does. # This will be the tooltip of the application.</span>
<span style=color:#c4a000>Exec</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>The command used to run the application.</span>
<span style=color:#c4a000>Icon</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>/home/neuro/.config/lxpanel/LXDE/icons/[[icon-name]].png</span>
<span style=color:#c4a000>Type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>Application</span>
<span style=color:#c4a000>Categories</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>[[Tool-name]]</span>
<span style=color:#c4a000>Terminal</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>true # or false</span>
</code></pre></div><p>The important part here is the value of <code>Exec</code>. If the tool is in the form of a singularity image, you should run the following command:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>bash /usr/share/fetch_and_run.sh <span style=color:#ce5c00;font-weight:700>[[</span>tool-name<span style=color:#ce5c00;font-weight:700>]]</span> <span style=color:#ce5c00;font-weight:700>[[</span>0.0.0<span style=color:#ce5c00;font-weight:700>]]</span> <span style=color:#ce5c00;font-weight:700>[[</span>YYYYMMDD<span style=color:#ce5c00;font-weight:700>]]</span> <span style=color:#ce5c00;font-weight:700>[[</span>cmd<span style=color:#ce5c00;font-weight:700>]]</span> <span style=color:#ce5c00;font-weight:700>[[</span>args<span style=color:#ce5c00;font-weight:700>]]</span>
</code></pre></div><p>What <code>fetch_and_run.sh</code> does is check if the image is already installed as a module. If not, it checks whether it can be installed or not (return <code>1</code> if not possible). After that, it installs the image as a module.
If <code>[[cmd]]</code> is specified, once the image is installed, it runs the command by giving the arguments from <code>[[args]]</code>.
Here are two examples for FreeSurfer and FreeView. This first one only installs the image as a module:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>bash /usr/share/fetch_and_run.sh freesurfer 6.0.1 <span style=color:#0000cf;font-weight:700>20200506</span>
</code></pre></div><p>And this does the same but runs FreeView afterward:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>bash /usr/share/fetch_and_run.sh freesurfer 6.0.1 <span style=color:#0000cf;font-weight:700>20200506</span> freeview
</code></pre></div><p>The resulting <code>.desktop</code> file corresponding to FreeView contains:</p>
<div class=highlight><pre tabindex=0 style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ini data-lang=ini><span style=color:#204a87;font-weight:700>[Desktop Entry]</span>
<span style=color:#c4a000>Name</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>FreeView 6.0.1</span>
<span style=color:#c4a000>GenericName</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>FreeView 6.0.1</span>
<span style=color:#c4a000>Comment</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>Start FreeView 6.0.1</span>
<span style=color:#c4a000>Exec</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>bash /usr/share/fetch_and_run.sh freesurfer 6.0.1 20200506 freeview</span>
<span style=color:#c4a000>Icon</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>/home/neuro/.config/lxpanel/LXDE/icons/run.png</span>
<span style=color:#c4a000>Type</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>Application</span>
<span style=color:#c4a000>Categories</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>FreeSurfer</span>
<span style=color:#c4a000>Terminal</span><span style=color:#ce5c00;font-weight:700>=</span><span style=color:#4e9a06>true</span>
</code></pre></div>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-b9cd3c04d25cdb41d3043cfa7acab883>5.2 - Storage</h1>
<div class=lead>Add additional storage</div>
<h2 id=mount-volume-using-sshfs>Mount volume using SSHFS</h2>
<p><code>sshfs -o allow_root USER@TARGET_HOST:TARGET_PATH SOURCE_PATH</code></p>
<h2 id=not-enough-free-space>Not enough free space</h2>
<p>For Windows</p>
<p><a href=https://yjmantilla.github.io/tutorials/wsl2-move-vhdx.html>https://yjmantilla.github.io/tutorials/wsl2-move-vhdx.html</a></p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-9a7c227f489e066f7d748ce204b03813>5.3 - System Testing</h1>
<div class=lead>Tested and working Neurodesk setups</div>
<h2 id=please-test-and-add-if-working->Please test and add if working :)</h2>
<table>
<thead>
<tr>
<th></th>
<th>hypervisor</th>
<th>container engine</th>
<th>build</th>
<th>client</th>
<th>who</th>
</tr>
</thead>
<tbody>
<tr>
<td>windows 10 Enterprise, build 18363</td>
<td>wsl2, hyperv</td>
<td>docker</td>
<td>yes</td>
<td>vnc, edge</td>
<td>Steffen</td>
</tr>
<tr>
<td>windows 10 Pro</td>
<td>wsl2, hyperv</td>
<td>docker</td>
<td>yes</td>
<td></td>
<td>Tom</td>
</tr>
<tr>
<td>windows 10 Home, build 19041</td>
<td>wsl2, hyperv</td>
<td>docker</td>
<td>yes</td>
<td>chrome</td>
<td>Geeta</td>
</tr>
<tr>
<td>windows 10 Home, Docker toolbox</td>
<td>virtualbox</td>
<td>docker</td>
<td>yes</td>
<td>chrome</td>
<td>Geeta</td>
</tr>
<tr>
<td>Debian Bullseye</td>
<td></td>
<td>docker</td>
<td>yes</td>
<td>firefox</td>
<td>Jakub</td>
</tr>
<tr>
<td>Ubuntu 20.04</td>
<td></td>
<td>docker</td>
<td>yes</td>
<td>firefox</td>
<td>Martin</td>
</tr>
<tr>
<td>macOS Catalina (10.15.5)</td>
<td></td>
<td>docker</td>
<td>yes</td>
<td>firefox, safari, chrome</td>
<td>Jakub</td>
</tr>
<tr>
<td>HPC Centos 6</td>
<td></td>
<td>singularity</td>
<td>no</td>
<td></td>
<td>Steffen</td>
</tr>
<tr>
<td>Ubuntu 18.04 on OpenStack (NECTAR)</td>
<td></td>
<td>docker</td>
<td>yes</td>
<td>firefox</td>
<td>Oren</td>
</tr>
</tbody>
</table>
<h2 id=run-neurodesk-vnm-for-free-on-cloud-providers>Run Neurodesk VNM for free on cloud providers</h2>
<ul>
<li><a href=https://mri.sbollmann.net/index.php/2020/12/08/run-neurodesk-on-oracle-cloud-free-tier>Oracle OCI</a></li>
<li><a href=https://henryjburg.medium.com/neurodesk-running-on-azure-3e38c590a152>Microsoft Azure</a></li>
</ul>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-f614fb095a0a23c57b6f9d4a9abcbb11>6 - For Developers</h1>
<div class=lead>Developer guide</div>
<h2 id=developing-neurodeskgithubio>Developing neurodesk.github.io</h2>
<h3 id=clone-repository>Clone repository</h3>
<p>Using SSH</p>
<p><code>git clone --recurse-submodules git@github.com:NeuroDesk/neurodesk.github.io.git</code></p>
<p>or Https:</p>
<p><code>git clone --recurse-submodules https://github.com/NeuroDesk/neurodesk.github.io.git</code></p>
<h3 id=download-hugo-binary>Download Hugo binary</h3>
<p>Hugo releases are on <a href=https://github.com/gohugoio/hugo/releases>https://github.com/gohugoio/hugo/releases</a></p>
<p>Download latest version of hugo extended</p>
<p>e.g. for windows: <a href=https://github.com/gohugoio/hugo/releases/download/v0.88.1/hugo_extended_0.88.1_Windows-64bit.zip>https://github.com/gohugoio/hugo/releases/download/v0.88.1/hugo_extended_0.88.1_Windows-64bit.zip</a></p>
<h3 id=start-local-hugo-server>Start local hugo server</h3>
<p>Extract hugo binary (hugo.exe) to your neurodesk.github.io dir</p>
<p>Run server for windows: <code>.\hugo.exe server --disableFastRender</code></p>
<p>Once started, dev website will be accessible via http://localhost:1313</p>
</div>
<div class=td-content style=page-break-before:always>
<h1 id=pg-08a90f4738abd9b7c845a70e79c1eba4>6.1 - Neurodesk Architecture</h1>
<div class=lead>The architecture of the Neurodesk ecosystem</div>
<h1 id=layers>Layers</h1>
<p>Neurodesktop: <a href=https://github.com/NeuroDesk/Neurodesktop>https://github.com/NeuroDesk/Neurodesktop</a></p>
<ul>
<li>docker container with interface modifications</li>
<li>contains tools necessary to manage containers: vscode, git, niype</li>
<li>CI: builds docker image and tests if it runs</li>
</ul>
<p>Neurocommand: <a href=https://github.com/NeuroDesk/Neurocommand>https://github.com/NeuroDesk/Neurocommand</a></p>
<ul>
<li>script to install and manage multiple containers using transparent singularity on any linux system</li>
<li>this repo would also handle the creation of menu entries in a general form applicable to different desktop environments</li>
<li>this repo can be re-used in other projects like CVL and the imaging workstations</li>
<li>CI: tests if containers can be installed</li>
</ul>
<p>transparent-singularity: <a href=https://github.com/NeuroDesk/transparent-singularity>https://github.com/NeuroDesk/transparent-singularity</a></p>
<ul>
<li>script to install neuro-sub-containers, installers are called by neurodesk script</li>
<li>this repo could provide a simple way of using our containers on HPCs for large scale processing of the pipelines build in VNM</li>
<li>CI: test if exposing of binaries work</li>
</ul>
<p>Neurocontainers: <a href=https://github.com/NeuroDesk/Neurocontainers>https://github.com/NeuroDesk/Neurocontainers</a></p>
<ul>
<li>build scripts for neuro-sub-containers</li>
<li>CI: building, pushing and testing of containers</li>
</ul>
<p>Neurodocker: <a href=https://github.com/NeuroDesk/neurodocker>https://github.com/NeuroDesk/neurodocker</a></p>
<ul>
<li>fork of neurodocker project</li>
<li>provides recipes for our containers built</li>
<li>we are providing pull requests back of recipes</li>
<li>CI: handled by <a href=https://github.com/ReproNim/neurodocker>neurodocker</a> - testing of generating container recipes</li>
</ul>
</div>
</main>
</div>
</div>
<footer class="bg-dark py-5 row d-print-none">
<div class="container-fluid mx-sm-5">
<div class=row>
<div class="col-6 col-sm-4 text-xs-center order-sm-2">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label>
<a class=text-white target=_blank rel=noopener href aria-label>
<i></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label>
<a class=text-white target=_blank rel=noopener href aria-label>
<i></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label>
<a class=text-white target=_blank rel=noopener href aria-label>
<i></i>
</a>
</li>
</ul>
</div>
<div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
<ul class="list-inline mb-0">
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label>
<a class=text-white target=_blank rel=noopener href aria-label>
<i></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label>
<a class=text-white target=_blank rel=noopener href aria-label>
<i></i>
</a>
</li>
<li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title aria-label>
<a class=text-white target=_blank rel=noopener href aria-label>
<i></i>
</a>
</li>
</ul>
</div>
<div class="col-12 col-sm-4 text-center py-2 order-sm-2">
</div>
</div>
</div>
</footer>
</div>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js integrity=sha384-+YQ4JLhjyBLPDQt//I+STsc9iw4uQqACwlvpslubQzn4u2UU2UFM80nGisd026JF crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.f6e5038a2fe223cb025ddb9e3f0d6e61c17f7ee07173fa91a33f23be1ed1ab52.js integrity="sha256-9uUDii/iI8sCXduePw1uYcF/fuBxc/qRoz8jvh7Rq1I=" crossorigin=anonymous></script>
</body>
</html>